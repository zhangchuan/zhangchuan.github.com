
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>研究中心</title>
  <meta name="author" content="Cloud.Zhang">

  
  <meta name="description" content="数据类型
Redis的Key
Redis的key是字符串类型 exits key 检测指定 key 是否存在，返回 1 表示存在，0 不存在 del key1 key2 &#8230;&#8230; keyN 删除给定 key,返回删除 key 的数目，0 表示给定 key 都不存在 type &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://zhangchuan.github.com">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="/javascripts/ender.js"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href="/atom.xml" rel="alternate" title="研究中心" type="application/atom+xml">
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  

</head>

<body   >
  <header role="banner"><hgroup>
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:zhangchuan.github.com" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2012/03/06/160015-redis/">Redis 入门手册</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-03-06T16:00:00+08:00" pubdate data-updated="true">Mar 6<span>th</span>, 2012</time>
        
      </p>
    
  </header>


  <div class="entry-content"><ul>
<li><h1>数据类型</h1></li>
<li><h2>Redis的Key</h2></li>
<li>Redis的key是字符串类型</li>
<li>  exits key 检测指定 key 是否存在，返回 1 表示存在，0 不存在</li>
<li>  del key1 key2 &#8230;&#8230; keyN 删除给定 key,返回删除 key 的数目，0 表示给定 key 都不存在</li>
<li>  type key 返回给定 key 值的类型。 返回 none 表示 key 不存在,string 字符类型， list 链表类型 set 无序集合类型&#8230;&#8230;</li>
<li>  keys pattern 返回匹配指定模式的所有 key</li>
<li>  randomkey 返回从当前数据库中随机选择的一个 key,如果当前数据库是空的，返回空串</li>
<li>  rename oldkey newkey 重命名一个 key,如果 newkey 存在，将会被覆盖，返回 1 表示成功，0 失败。可能是 oldkey 不存在或者和 newkey 相同。</li>
<li>  renamenx oldkey newkey 同上，但是如果 newkey 存在返回失败。</li>
<li>  expire key seconds 为 key 指定过期时间，单位是秒。返回 1 成功，0 表示 key 已经设置过过期时间或者不存在。</li>
<li>  ttl key 返回设置过过期时间key的剩余过期秒数。-1表示key不存在或者未设置过期时间。</li>
<li>  select db-index 通过索引选择数据库，默认连接的数据库是 0,默认数据库数是 16 个。返回 1表示成功，0 失败。</li>
<li>  move key db-index 将 key 从当前数据库移动到指定数据库。返回 1 表示成功。0 表示 key
不存在或者已经在指定数据库中。</li>
<li><h2>Redis的vaule</h2></li>
<li>Redis提供五种数据类型: string, hash, list, set及sorted set</li>
<li>string 类型数据操作指令简介</li>
<li>  set key value 设置 key 对应 string 类型的值，返回 1 表示成功，0 失败。</li>
<li>  setnx key value 如果 key 不存在，设置 key 对应 string 类型的值。如果 key 已经存在，返回 0。</li>
<li>  get key 获取 key 对应的 string 值,如果 key 不存在返回 nil</li>
<li>  getset key value 先获取 key 的值，再设置 key 的值。如果 key 不存在返回 nil。</li>
<li>  mget key1 key2 &#8230;&#8230; keyN 一次获取多个 key 的值，如果对应 key 不存在，则对应返回 nil。</li>
<li>  mset key1 value1 &#8230;&#8230; keyN valueN 一次设置多个 key 的值， 成功返回 1 表示所有的值都设置了，失败返回 0 表示没有任何值被设置。</li>
<li>  msetnx key1 value1 &#8230;&#8230; keyN valueN 一次设置多个 key 的值，但是不会覆盖已经存在的 key</li>
<li>  incr key 对 key 的值做++操作，并返回新的值。注意 incr 一个不是 int 的 value 会返回错误，incr 一个不存在的 key，则设置 key 值为 1。</li>
<li>  decr key 对 key 的值做&#8211;操作，decr 一个不存在 key，则设置 key 值为-1。</li>
<li>  incrby key integer 对 key 加上指定值 ，key 不存在时候会设置 key，并认为原来的 value是 0。</li>
<li>  decrby key integer 对 key 减去指定值。 decrby 完全是为了可读性， 我们完全可以通过 incrby一个负值来实现同样效果，反之一样。</li>
<li>hash 类型数据操作指令简介</li>
<li>  hset key field value 设置 hash field 为指定值，如果 key 不存在，则创建</li>
<li>  hget key field 获取指定的 hash field。</li>
<li>  hmget key filed1&#8230;.fieldN 获取全部指定的 hash filed。</li>
<li>  hmset key filed1 value1 &#8230;&#8230; filedN valueN 同时设置 hash 的多个 field。</li>
<li>  hincrby key field integer 将指定的 hash filed 加上指定值。成功返回 hash filed 变更后的值。</li>
<li>  hexists key field 检测指定 field 是否存在。</li>
<li>  hdel key field 删除指定的 hash field。</li>
<li>  hlen key 返回指定 hash 的 field 数量。</li>
<li>  hkeys key 返回 hash 的所有 field。</li>
<li>  hvals key 返回 hash 的所有 value。</li>
<li>  hgetall 返回 hash 的所有 filed 和 value</li>
<li>List 类型数据操作指令简介</li>
<li>  lpush key string 在 key 对应 list 的头部添加字符串元素，返回 1 表示成功，0 表示 key 存在且不是 list 类型。</li>
<li>  rpush key string 在 key 对应 list 的尾部添加字符串元素。</li>
<li>  llen key 返回 key 对应 list 的长度，如果 key 不存在返回 0，如果 key 对应类型不是 list返回错误。</li>
<li>  lrange key start end 返回指定区间内的元素，下标从 0 开始，负值表示从后面计算，-1 表示倒数第一个元素 ，key 不存在返回空列表。</li>
<li>  ltrim key start end 截取 list 指定区间内元素，成功返回 1，key 不存在返回错误。</li>
<li>  lset key index value 设置 list 中指定下标的元素值，成功返回 1，key 或者下标不存在返回错误。</li>
<li>  lrem key count value从 List 的头部 （count正数） 或尾部 （count负数） 删除一定数量 （count）匹配 value 的元素，返回删除的元素数量。count 为 0 时候删除全部。</li>
<li>  lpop key 从 list 的头部删除并返回删除元素。 如果 key 对应 list 不存在或者是空返回 nil，如果 key 对应值不是 list 返回错误。</li>
<li>  rpop key 从 list 的尾部删除并返回删除元素。</li>
<li>  blpop key1 &#8230;&#8230; keyN timeout 从左到右扫描， 返回对第一个非空 list 进行 lpop 操作并返回，比如 blpop list1 list2 list3 0 ,如果 list 不存在 list2,list3 都是非空则对 list2 做lpop 并返回从 list2 中删除的元素。如果所有的 list 都是空或不存在，则会阻塞 timeout秒，timeout 为 0 表示一直阻塞。当阻塞时，如果有 client 对 key1&#8230;keyN 中的任意 key进行 push 操作，则第一在这个 key 上被阻塞的 client 会立即返回。如果超时发生，则返回nil。有点像 unix 的 select 或者 poll。</li>
<li>  brpop 同 blpop，一个是从头部删除一个是从尾部删除。</li>
<li>set 类型数据操作指令简介</li>
<li>  sadd key member 添加一个 string 元素到 key 对应 set 集合中，成功返回 1,如果元素以及在集合中则返回 0，key 对应的 set 不存在则返回错误。</li>
<li>  srem key member 从 key 对应 set 中移除指定元素，成功返回 1，如果 member 在集合中不存在或者 key 不存在返回 0，如果 key 对应的不是 set 类型的值返回错误。</li>
<li>  spop key 删除并返回 key 对应 set 中随机的一个元素,如果 set 是空或者 key 不存在返回nil。</li>
<li>  srandmember key 同 spop，随机取 set 中的一个元素，但是不删除元素。</li>
<li>  smove srckey dstkey member 从srckey对应set中移除member并添加到dstkey对应set中，整个操作是原子的。成功返回 1,如果 member 在 srckey 中不存在返回 0，如果 key 不是 set类型返回错误。</li>
<li>  scard key 返回 set 的元素个数，如果 set 是空或者 key 不存在返回 0。</li>
<li>  sismember key member 判断 member 是否在 set 中，存在返回 1，0 表示不存在或者 key 不存在。</li>
<li>  sinter key1 key2 …… keyN 返回所有给定 key 的交集。</li>
<li>  sinterstore dstkey key1 &#8230;&#8230;. keyN 返回所有给定 key 的交集，并保存交集存到 dstkey 下。</li>
<li>  sunion key1 key2 &#8230;&#8230; keyN 返回所有给定 key 的并集。</li>
<li>  sunionstore dstkey key1 &#8230;&#8230; keyN 返回所有给定 key 的并集，并保存并集到 dstkey 下。</li>
<li>  sdiff key1 key2 &#8230;&#8230; keyN 返回所有给定 key 的差集。</li>
<li>  sdiffstore dstkey key1 &#8230;&#8230; keyN 返回所有给定 key 的差集，并保存差集到 dstkey 下。</li>
<li>  smembers key 返回 key 对应 set 的所有元素，结果是无序的。</li>
<li>Sorted Set 类型数据操作指令简介</li>
<li>  add key score member 添加元素到集合，元素在集合中存在则更新对应 score。</li>
<li>  zrem key member 删除指定元素，1 表示成功，如果元素不存在返回 0。</li>
<li>  zincrby key incr member 增加对应 member 的 score 值， 然后移动元素并保持 skip list 保持有序。返回更新后的 score 值。</li>
<li>  zrank key member 返回指定元素在集合中的排名（下标） ，集合中元素是按 score 从小到大排序的。</li>
<li>  zrevrank key member 同上,但是集合中元素是按 score 从大到小排序。</li>
<li>  zrange key start end 类似 lrange 操作从集合中去指定区间的元素。返回的是有序结果</li>
<li>  zrevrange key start end 同上，返回结果是按 score 逆序的。</li>
<li>  zrangebyscore key min max 返回集合中 score 在给定区间的元素。</li>
<li>  zcount key min max 返回集合中 score 在给定区间的数量。</li>
<li>  zcard key 返回集合中元素个数。</li>
<li>  zscore key element 返回给定元素对应的 score。</li>
<li>  zremrangebyrank key min max 删除集合中排名在给定区间的元素。</li>
<li>  zremrangebyscore key min max 删除集合中 score 在给定区间的元素</li>
</ul>

</div>
  
  


    </article>
  
  <div class="pagination">
    
      <a class="prev" href="/blog/page/2/">&larr; Older</a>
    
    <a href="/blog/archives">Blog Archives</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section>
  <h1></h1>
  <img src="/images/newton.gif">
</section>
<section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2012/03/06/160015-redis/">redis 入门手册</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/03/06/150903-python/">Python 参考手册 第4章</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/03/02/091722-rabbitmq/">RabbitMQ 消息队列应用</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/03/01/154153-mongodb/">MongoDB权威指南 7</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/03/01/142455-mongodb/">MongDB权威指南 6</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/03/01/104304-mongodb/">MongoDB权威指南 5</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/02/28/084414-python/">MongoDB权威指南 4</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/02/23/120934-python/">MongoDB权威指南 3</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/02/22/141006-mongodb/">monogodb 大杂烩</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/02/15/143830-scribe/">scribe安装</a>
      </li>
    
  </ul>
</section>

<section>
<h1>Categories</h1>
<span class='categories_tag'> <a href='/blog/categories/blog' style='font-size: 116.36363636363636%'>Blog(3)</a>  <a href='/blog/categories/database' style='font-size: 132.72727272727272%'>Database(6)</a>  <a href='/blog/categories/git' style='font-size: 105.45454545454545%'>Git(1)</a>  <a href='/blog/categories/mongodb' style='font-size: 132.72727272727272%'>Mongodb(6)</a>  <a href='/blog/categories/monitor' style='font-size: 105.45454545454545%'>Monitor(1)</a>  <a href='/blog/categories/munin' style='font-size: 105.45454545454545%'>Munin(1)</a>  <a href='/blog/categories/python' style='font-size: 160.0%'>Python(11)</a>  <a href='/blog/categories/rabbitmq' style='font-size: 105.45454545454545%'>Rabbitmq(1)</a>  <a href='/blog/categories/read' style='font-size: 160.0%'>Read(11)</a>  <a href='/blog/categories/redis' style='font-size: 127.27272727272728%'>Redis(5)</a>  <a href='/blog/categories/scribe' style='font-size: 105.45454545454545%'>Scribe(1)</a> </span>
</section>





  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p align="right" style="width: 75%">
  Copyright &copy; 2012 - Cloud.Zhang
</p>

</footer>
  







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
